(this.webpackJsonpexam=this.webpackJsonpexam||[]).push([[0],{122:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(29),i=a.n(c),o=a(22),u=a(9),l=(a(75),a(76),a(147)),m=a(148),s=a(149),d=a(154),v=a(16),f=a(136),p=a(137),w=a(138),h=a(139),b=a(25),g=a.n(b),O=a(62),y=a(47),D=a(37),E=a(155),j=a(130),x=a(131),k=a(151),S=a(132),N=a(133),M=a(152),T=a(153),z=a(134),B=a(156),C=a(135),F=a(59),I=a(58),J=a(57),R=a.n(J),W=["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"],_=function(e){return R()(e,{lower:!0})},q=function(e,t){return e&&t&&new Date(e).toDateString()===new Date(t).toDateString()},H=function(e){return W[new Date(e).getDay()]},A={Clear:"\u2600\ufe0f",Clouds:"\u2601\ufe0f",Rain:"\u2614\ufe0f",Drizzle:"\u2614\ufe0f",Snow:"\u2744\ufe0f",Thunderstorm:"\u26a1\ufe0f",Mist:"\ud83c\udf2b",Smoke:"\ud83c\udf2b",Haze:"\ud83c\udf2b",Dust:"\ud83c\udf2b",Fog:"\ud83c\udf2b",Sand:"\ud83c\udf2b",Ash:"\ud83c\udf2b",Squall:"\ud83c\udf2b",Tornado:"\ud83c\udf2b"},K=new Date,L=Object(E.a)(0,5).map((function(e){var t=new Date(K.getTime());return t.setDate(t.getDate()+e),{day:t.getTime(),max:NaN,min:NaN,weather:void 0}})),P=Object(D.b)({name:"weather",initialState:{overview:L,temperatures:{}},reducers:{setOverview:function(e,t){var a=t.payload;e.overview=a},setDayTemperatures:function(e,t){var a=t.payload,n=a.day,r=a.value;e.temperatures[new Date(n).toDateString()]=r}}}),V=P.actions,$=V.setOverview,G=V.setDayTemperatures,Q=function(e){return function(t){return e?t.weather.overview.find((function(t){var a=t.day;return q(a,e)})):void 0}},U=P.reducer,X=a(60),Y=a.n(X);function Z(e){var t,a=e.children,n=e.day,c=e.currentDay,i=q(n,c),u=Object(v.c)(Q(n)),l=u||{max:null,min:null,weather:null},m=l.max,s=l.min,d=l.weather;return r.a.createElement(f.a,{tag:o.b,to:"/".concat((t=n,t?_(H(t)):"")),className:Y.a.DayOverview+" text-center my-1",color:i?"dark":"light",inverse:i},r.a.createElement(p.a,null,r.a.createElement(w.a,{tag:"h5"},a),d?r.a.createElement(h.a,null,d," ",Math.round(s),"\xb0 ~ ",Math.round(m),"\xb0"):r.a.createElement(h.a,null,"\u23f3")))}function ee(e){var t=e.currentDay,a=Object(v.c)((function(e){return e.weather.overview.map((function(e){return e.day}))})),c=Object(v.c)(Q(a[0])),i=Object(v.b)();return Object(n.useEffect)((function(){c&&c.weather||i(function(){var e=Object(y.a)(g.a.mark((function e(t,a){var n,r,c,i,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("//api.openweathermap.org/data/2.5/forecast?&q=Region Metropolitana,cl&units=metric&appid=".concat("475eeac4a11ada97caf71d84c0e3e6cd"));case 2:if(!(n=e.sent).ok){e.next=12;break}return e.next=6,n.json();case 6:r=e.sent,c=r.list.map((function(e){var t=e.dt,a=e.main.temp,n=Object(O.a)(e.weather,1)[0].main;return{time:1e3*t,temperature:a,weather:A[n]}})),i=Object(j.a)((function(e){var t=e.time;return new Date(t).toDateString()}),c),o=Object(x.a)((function(e){var t=e.map(Object(k.a)("temperature")),a=t.reduce(S.a),n=t.reduce(N.a),r=Object(M.a)(Object(T.a)(Object(k.a)("weather")),Object(z.a)(B.a),C.a,Object(F.a)((function(e,t){return t[1]>e[1]?t:e}),["",0]),Object(I.a)(0))(e);return{day:e[0].time,max:a,min:n,weather:r}}),i),t($(Object.values(o))),Object.keys(i).forEach((function(e){var a=i[e];t(G({day:a[0].time,value:a}))}));case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())})),r.a.createElement("div",null,a.map((function(e){return r.a.createElement(Z,{key:new Date(e).toDateString(),day:e,currentDay:t},H(e))})))}var te=a(63),ae=a(142),ne=a(150),re=a(140),ce=a(141),ie=a(145),oe=a(146),ue=a(143),le=a(144),me=function(e){return new Date(e.time).getHours()},se=function(e){return e.temperature};function de(e){var t,a=e.width,c=e.height,i=e.day,o=Object(v.c)((t=i,function(e){return t?e.weather.temperatures[new Date(t).toDateString()]:void 0})),u=Object(v.b)();if(Object(n.useEffect)((function(){!i||o&&0!==o.length||u(function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),!o||0===o.length)return r.a.createElement("div",null);var l=6,m=30,s=a-m-0,d=c-l-30,f=Object(re.a)({range:[0,s],domain:o.map(me),paddingOuter:.5,paddingInner:1}),p=Object(ce.a)({range:[d,0],domain:[o.map(se).reduce(N.a,10),o.map(se).reduce(S.a,25)],nice:!0}),w=Object(M.a)(me,f),h=Object(M.a)(se,p),b=o.map((function(e,t){return r.a.createElement(ae.a,{key:"dot-".concat(me(e)),cx:w(e),cy:h(e),r:"10",fill:"red"})}));return r.a.createElement("svg",{viewBox:"0 0 ".concat(a," ").concat(c),className:"img-fluid mx-auto"},r.a.createElement(te.a,{top:l,left:m},r.a.createElement(ue.a,{scale:f,width:s,height:d,stroke:"silver"}),r.a.createElement(le.a,{scale:p,width:s,height:d,stroke:"silver"}),r.a.createElement(ne.a,{data:o,x:Object(M.a)(me,f),y:Object(M.a)(se,p),stroke:"red",strokeWidth:1.5,shapeRendering:"geometricPrecision"}),r.a.createElement(te.a,null,b),r.a.createElement(ie.a,{scale:p,tickFormat:function(e){return"".concat(e.toString(),"\xb0")}}),r.a.createElement(oe.a,{scale:f,top:d,tickFormat:function(e){return"".concat(e.toString(),":00")}})))}var ve=function(e){var t=function(e){var t=W.findIndex((function(t){return _(t)===e}));if(-1!==t){for(var a=new Date;a.getDay()!==t;)a.setDate(a.getDate()+1);return a.getTime()}}(e.match.params.day);return r.a.createElement(l.a,{className:"p-4"},r.a.createElement(m.a,null,r.a.createElement(s.a,{sm:"4",className:"mb-4"},r.a.createElement(ee,{currentDay:t})),r.a.createElement(s.a,{sm:"8",className:"text-center my-auto"},t?r.a.createElement("div",null,r.a.createElement(de,{width:500,height:500,day:t}),r.a.createElement(d.a,{tag:o.b,to:"/",className:"mt-4"},"Cerrar")):r.a.createElement("p",null,"Selecciona un d\xeda para ver detalles."))))},fe=Object(D.a)({reducer:{weather:U}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v.a,{store:fe},r.a.createElement(o.a,{basename:"/web-app-exercise/"},r.a.createElement(u.a,{path:"/:day?",component:ve})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},60:function(e,t,a){e.exports={DayOverview:"DayOverview_DayOverview__1SK8v"}},70:function(e,t,a){e.exports=a(122)},76:function(e,t,a){}},[[70,1,2]]]);
//# sourceMappingURL=main.f95c324c.chunk.js.map